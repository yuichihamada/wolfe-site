{% extends 'base.html' %}
{% block title %}AIツール - REBIRTH Connect{% endblock %}
{% block content %}
<section class="max-w-6xl mx-auto px-4 py-12">

  <!-- 説明エリア -->
  <header class="mb-8">
    <h2 class="text-2xl font-semibold mb-3">便利なAIツール</h2>
    <p class="text-sm text-gray-700">
      このページでは、WOLFE活動でよく使う「アポイントの組み方」「会話の進め方」
      「WOLFEの伝え方」などをサポートするAIツールを紹介しています。
    </p>
  </header>

  {# --- AIツール本体エリアのみ --- #}
  <div>

    {% if tools|length == 1 %}
      {# ツールが1つだけのとき：中央寄せで少し大きめに #}
      <div class="max-w-2xl mx-auto">
        {% for t in tools %}
          <article class="bg-white border rounded-lg p-6 shadow-sm md:flex md:items-start md:gap-6">

            {% if t.image %}
              <div class="flex-shrink-0 mb-4 md:mb-0">
                <img src="{{ t.image.url }}" class="w-28 h-28 rounded-full object-cover" alt="{{ t.name }}">
              </div>
            {% else %}
              <div class="flex-shrink-0 mb-4 md:mb-0">
                <div class="w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center text-gray-500">
                  <span class="text-xs">No Image</span>
                </div>
              </div>
            {% endif %}

            <div>
              <p class="text-xs text-gray-500 mb-1">{{ t.category }}</p>
              <h3 class="font-semibold text-lg mb-2">{{ t.name }}</h3>
              <p class="text-gray-700 mb-3 text-sm">{{ t.intro|linebreaks }}</p>

              {% if t.howto %}
                <details class="text-sm mb-4">
                  <summary class="cursor-pointer">使い方を見る</summary>
                  <div class="mt-2">{{ t.howto|linebreaks }}</div>
                </details>
              {% endif %}

              <a href="{{ t.link_url }}" target="_blank" rel="noopener"
                 class="inline-block px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700">
                ツールを開く
              </a>
            </div>

          </article>
        {% endfor %}
      </div>

    {% else %}
      {# ツールが複数のとき：カード一覧 #}
      <div class="grid sm:grid-cols-2 gap-6">
        {% for t in tools %}
          <article class="bg-white border rounded-lg p-5 shadow-sm">

            {% if t.image %}
              <img src="{{ t.image.url }}" class="w-20 h-20 rounded-full object-cover mb-4" alt="{{ t.name }}">
            {% else %}
              <div class="w-16 h-16 bg-gray-200 rounded-full mb-4 flex items-center justify-center text-gray-500">
                <span class="text-xs">No Image</span>
              </div>
            {% endif %}

            <p class="text-xs text-gray-500 mb-1">{{ t.category }}</p>
            <h3 class="font-semibold mb-2">{{ t.name }}</h3>

            <p class="text-gray-700 mb-3 text-sm">{{ t.intro|linebreaks }}</p>

            {% if t.howto %}
              <details class="text-sm mb-3">
                <summary class="cursor-pointer">使い方</summary>
                <div class="mt-2">{{ t.howto|linebreaks }}</div>
              </details>
            {% endif %}

            <a href="{{ t.link_url }}" target="_blank" rel="noopener"
               class="inline-block text-blue-600 text-sm underline">
              開く
            </a>
          </article>
        {% endfor %}
      </div>
    {% endif %}

  </div>

</section>
{% endblock %}
